DROP DATABASE IF EXISTS choho_db;
CREATE DATABASE choho_db;
USE choho_db;
DROP TABLE IF EXISTS `asesors`;
CREATE TABLE `asesors` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `codigoAsesor` VARCHAR(255) NOT NULL,
   `name` VARCHAR(255) NOT NULL,
   PRIMARY KEY (`id`)
);
DROP TABLE IF EXISTS `clientes`;
CREATE TABLE `clientes` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `name` VARCHAR(255) NOT NULL,
   `asesor_id` INT,
   PRIMARY KEY (`id`)
);
DROP TABLE IF EXISTS `productos`;
CREATE TABLE `productos` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `name` VARCHAR(255) NOT NULL,
   `valorUnitario` INT NOT NULL,
   `tipo_id` INT,
   PRIMARY KEY (`id`)
);
DROP TABLE IF EXISTS `pedidos`;
CREATE TABLE `pedidos` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `fechaPago` DATETIME,
   `cantidad` INT NOT NULL,
   `cliente_id` INT,
   `estado_id` INT,
   PRIMARY KEY (`id`)
);
DROP TABLE IF EXISTS `pedido_productos`;
CREATE TABLE `pedido_productos` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `pedido_id` INT,
   `producto_id` INT,
   PRIMARY KEY (`id`)
);
DROP TABLE IF EXISTS `tipos`;
CREATE TABLE `tipos` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `Nombre` VARCHAR(255) NOT NULL,
   PRIMARY KEY (`id`)
);
DROP TABLE IF EXISTS `estados`;
CREATE TABLE `estados` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `Nombre` VARCHAR(255) NOT NULL,
   PRIMARY KEY (`id`)
);


ALTER TABLE `clientes` ADD CONSTRAINT `FK_b6ad4070-d17e-4056-aa93-1e0e9b182b36` FOREIGN KEY (`asesor_id`) REFERENCES `asesors`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `productos` ADD CONSTRAINT `FK_087e71bb-ff5e-4bdb-8d97-0b81187743e1` FOREIGN KEY (`tipo_id`) REFERENCES `tipos`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `pedidos` ADD CONSTRAINT `FK_0553467a-6471-425b-86e5-a3a50a52e99a` FOREIGN KEY (`cliente_id`) REFERENCES `clientes`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `pedidos` ADD CONSTRAINT `FK_942aee19-faa9-460a-8f73-42b72ac88a30` FOREIGN KEY (`estado_id`) REFERENCES `estados`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `pedido_productos` ADD CONSTRAINT `FK_179cd54d-dc2b-4847-9344-178c2b008be2` FOREIGN KEY (`pedido_id`) REFERENCES `pedidos`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `pedido_productos` ADD CONSTRAINT `FK_4a6186f8-efe7-44f0-961a-1714a07a5a29` FOREIGN KEY (`producto_id`) REFERENCES `productos`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;