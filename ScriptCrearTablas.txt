DROP DATABASE IF EXISTS choho_db;
CREATE DATABASE choho_db;
USE choho_db;
DROP TABLE IF EXISTS `asesor`;
CREATE TABLE `asesor` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `codigoAsesor` VARCHAR(255) NOT NULL,
   `name` VARCHAR(255) NOT NULL,
   PRIMARY KEY (`id`)
);
DROP TABLE IF EXISTS `cliente`;
CREATE TABLE `cliente` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `name` VARCHAR(255) NOT NULL,
   `asesor_id` INT,
   PRIMARY KEY (`id`)
);
DROP TABLE IF EXISTS `producto`;
CREATE TABLE `producto` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `name` VARCHAR(255) NOT NULL,
   `valorUnitario` INT NOT NULL,
   `tipo_id` INT,
   PRIMARY KEY (`id`)
);
DROP TABLE IF EXISTS `pedido`;
CREATE TABLE `pedido` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `fechaPago` DATETIME,
   `cantidad` INT NOT NULL,
   `cliente_id` INT,
   `estado_id` INT,
   PRIMARY KEY (`id`)
);
DROP TABLE IF EXISTS `pedido_producto`;
CREATE TABLE `pedido_producto` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `pedido_id` INT,
   `producto_id` INT,
   PRIMARY KEY (`id`)
);
DROP TABLE IF EXISTS `tipo`;
CREATE TABLE `tipo` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `Nombre` VARCHAR(255) NOT NULL,
   PRIMARY KEY (`id`)
);
DROP TABLE IF EXISTS `estado`;
CREATE TABLE `estado` (
   `id` INT NOT NULL AUTO_INCREMENT,
   `Nombre` VARCHAR(255) NOT NULL,
   PRIMARY KEY (`id`)
);


ALTER TABLE `cliente` ADD CONSTRAINT `FK_b6ad4070-d17e-4056-aa93-1e0e9b182b36` FOREIGN KEY (`asesor_id`) REFERENCES `asesor`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `producto` ADD CONSTRAINT `FK_087e71bb-ff5e-4bdb-8d97-0b81187743e1` FOREIGN KEY (`tipo_id`) REFERENCES `tipo`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `pedido` ADD CONSTRAINT `FK_0553467a-6471-425b-86e5-a3a50a52e99a` FOREIGN KEY (`cliente_id`) REFERENCES `cliente`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `pedido` ADD CONSTRAINT `FK_942aee19-faa9-460a-8f73-42b72ac88a30` FOREIGN KEY (`estado_id`) REFERENCES `estado`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `pedido_producto` ADD CONSTRAINT `FK_179cd54d-dc2b-4847-9344-178c2b008be2` FOREIGN KEY (`pedido_id`) REFERENCES `pedido`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `pedido_producto` ADD CONSTRAINT `FK_4a6186f8-efe7-44f0-961a-1714a07a5a29` FOREIGN KEY (`producto_id`) REFERENCES `producto`(`id`) ON DELETE CASCADE ON UPDATE CASCADE;